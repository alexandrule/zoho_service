#!/usr/bin/env ruby
require 'zoho_service'

zoho_conn = ZohoService::ApiConnector.new('224d6ade955bbb18f82ebd00f5c6642e', {}, true)

# ticket = c.tickets.first.update(subject: 'zzzz Вот ваш первый талон.')
# ticket = c.tickets.first

ticket = zoho_conn.tickets.new({
  "subCategory": "Sub General",
  "contactId": zoho_conn.contacts.first.id,
  "subject": "100500 started",
  "dueDate": (Time.now + 300.days).utc,
  "departmentId": zoho_conn.departments.first.id,
  "channel": "Email",
  "description": "Hai This is Description",
  "assigneeId": zoho_conn.agents.first.id,
  "phone": "1 888 900 9646",
  "email": "example@example.com",
  "status": "Open"
}).save!


puts "\n\n ticket=[#{ticket.to_json}] \n\n"
comm = ticket.comments.create({ 
  "isPublic": "true",
  "content": "comm 1005002"
})

comm = ticket.comments.new({ 
  "isPublic": "true",
  "content": "comm 1005003"
}).save!

comm = ticket.comments.first
comm.delete!

puts "\n\n comm=[#{comm.to_json}] \n\n"

ticket.update(description: ticket.description + ' bla-bla-bla ')
